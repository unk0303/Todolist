<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Auth Test</title>
    <style>
        body { font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; max-width: 760px; margin: 32px auto; padding: 0 16px; }
        h1 { margin: 0 0 8px; }
        .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin: 16px 0; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        label { display: block; margin: 8px 0 4px; }
        input { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 8px; }
        button { padding: 10px 14px; border-radius: 10px; border: 1px solid #ccc; cursor: pointer; background: #f7f7f7; }
        pre { background: #111; color: #eee; padding: 12px; border-radius: 8px; overflow: auto; }
        .actions { margin-top:12px; display:flex; gap:8px; flex-wrap: wrap; }
    </style>
</head>
<body>
<h1>로그인/회원가입 API 테스트</h1>
<p style="margin-top:0">서버 실행 후 <code>/api/auth/signup</code>, <code>/api/auth/login</code> 엔드포인트를 브라우저에서 바로 호출해 봅니다.</p>

<div class="card">
    <div class="row">
        <div>
            <label for="username">Username</label>
            <input id="username" autocomplete="username" value="alice" />
        </div>
        <div>
            <label for="password">Password</label>
            <input id="password" type="password" autocomplete="current-password" value="pass1234" />
        </div>
    </div>

    <div class="actions">
        <button id="btn-signup">POST /api/auth/signup</button>
        <button id="btn-login">POST /api/auth/login</button>
        <button id="btn-clear">결과 지우기</button>
    </div>
</div>

<div class="card">
    <h3>요청/응답</h3>
    <pre id="log" aria-live="polite"></pre>
</div>

<script>
    const $ = (id) => document.getElementById(id);
    const log = $('log');

    const bodyFromInputs = () => ({
        username: $('username').value.trim(),
        password: $('password').value
    });

    const pretty = (text) => {
        try { return JSON.stringify(JSON.parse(text), null, 2); }
        catch { return text; }
    };

    const append = (t) => { log.textContent += t + '\n'; };

    const call = async (path) => {
        const body = bodyFromInputs();
        append(`▶ POST ${path}\n${JSON.stringify(body, null, 2)}\n`);
        try {
            const res = await fetch(path, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(body)
            });
            const text = await res.text();
            append(`◀ ${res.status} ${res.statusText}\n${pretty(text)}\n`);
        } catch (e) {
            append(`✖ ERROR\n${String(e)}\n`);
        }
    };

    $('btn-signup').onclick = () => call('/api/auth/signup');
    $('btn-login').onclick = () => call('/api/auth/login');
    $('btn-clear').onclick = () => log.textContent = '';
</script>
</body>
</html>
